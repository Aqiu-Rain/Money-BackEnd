import{u as P,g as I,s as c,a as M,b as T}from"./settings-BhTuWeNl.js";import{_ as D,r as p,k as x,o as E,a as m,b as F,e as o,w as r,f as d,g as u,F as i,l as b,h as q,n as _}from"./index-D601hLYv.js";const L={class:"container"},O={class:"setting-box"},$={__name:"Setting",setup(h){const v=p(null),y=P(),g=p([]),k=p([5,6,7,8]),U=p(["N","E","O","M","S"]),w=p([1,1.5,2]),z=p([384e3]),t=x({port:"",baudrate:384e3,bytesize:8,parity:"N",stopbits:1,timeout:1,xonxoff:!1,rtscts:!1,dsrdtr:!1}),S=x({port:[{required:!0,message:"端口不能为空",trigger:"blur"}]});E(()=>{I().then(a=>{y.setItem(a.data),t.port=a.data.port,t.baudrate=a.data.baudrate,t.bytesize=a.data.bytesize,t.parity=a.data.parity,t.timeout=a.data.timeout,t.xonxoff=a.data.xonxoff,t.rtscts=a.data.rtscts,t.dsrdtr=a.data.dsrdtr}).catch(a=>{c("error",a)}),M().then(a=>{g.value=a.data}).catch(a=>{c("error",a)})});const B=a=>{a.validate(l=>{if(!l)return!1;T(t).then(s=>{y.setItem(s.data),c("success","设置更新成功")}).catch(s=>{console.log("--------------------------"),console.log(s),console.log("--------------------------"),c("error","设置更新失败:"+s)})})};return(a,l)=>{const s=d("el-option"),f=d("el-select"),n=d("el-form-item"),N=d("el-input-number"),V=d("el-switch"),R=d("el-button"),C=d("el-form");return u(),m("div",L,[F("div",O,[o(C,{model:t,"label-width":"100",ref_key:"formRef",ref:v,rules:S,style:{width:"100%"}},{default:r(()=>[o(n,{label:"端口号",prop:"port"},{default:r(()=>[o(f,{modelValue:t.port,"onUpdate:modelValue":l[0]||(l[0]=e=>t.port=e),placeholder:"请选择端口"},{default:r(()=>[(u(!0),m(i,null,b(g.value,e=>(u(),_(s,{label:e.Desc,value:e.Port,key:e.Port},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"波特率",prop:"baudrate"},{default:r(()=>[o(f,{modelValue:t.baudrate,"onUpdate:modelValue":l[1]||(l[1]=e=>t.baudrate=e),placeholder:"请选择波特率"},{default:r(()=>[(u(!0),m(i,null,b(z.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"数据位",prop:"bytesize"},{default:r(()=>[o(f,{modelValue:t.bytesize,"onUpdate:modelValue":l[2]||(l[2]=e=>t.bytesize=e),placeholder:"请选择数据位"},{default:r(()=>[(u(!0),m(i,null,b(k.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"校验位",prop:"parity"},{default:r(()=>[o(f,{modelValue:t.parity,"onUpdate:modelValue":l[3]||(l[3]=e=>t.parity=e),placeholder:"请选择校验位"},{default:r(()=>[(u(!0),m(i,null,b(U.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"停止位",prop:"stopbits"},{default:r(()=>[o(f,{modelValue:t.stopbits,"onUpdate:modelValue":l[4]||(l[4]=e=>t.stopbits=e),placeholder:"请选择停止位"},{default:r(()=>[(u(!0),m(i,null,b(w.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"超时值",prop:"timeout"},{default:r(()=>[o(N,{modelValue:t.timeout,"onUpdate:modelValue":l[5]||(l[5]=e=>t.timeout=e),precision:2,step:.1,max:10},null,8,["modelValue"])]),_:1}),o(n,{label:"软流控",prop:"xonxoff"},{default:r(()=>[o(V,{modelValue:t.xonxoff,"onUpdate:modelValue":l[6]||(l[6]=e=>t.xonxoff=e)},null,8,["modelValue"])]),_:1}),o(n,{label:"硬RTS",prop:"rtscts"},{default:r(()=>[o(V,{modelValue:t.rtscts,"onUpdate:modelValue":l[7]||(l[7]=e=>t.rtscts=e)},null,8,["modelValue"])]),_:1}),o(n,{label:"硬DTR",prop:"dsrdtr"},{default:r(()=>[o(V,{modelValue:t.dsrdtr,"onUpdate:modelValue":l[8]||(l[8]=e=>t.dsrdtr=e)},null,8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(R,{type:"primary",round:"",style:{width:"100%"},size:"large",onClick:l[9]||(l[9]=e=>B(v.value))},{default:r(()=>l[10]||(l[10]=[q("保存设置 ")])),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},G=D($,[["__scopeId","data-v-54c3513f"]]);export{G as default};
