import{u as N,g as C,a as P,b as j}from"./settings-sBVrZK1a.js";import{s as c}from"./request-BoLlz1le.js";import{_ as I,r as d,q as V,o as M,a as p,b as R,e as o,w as s,h as i,i as r,F as b,v as f,j as q,t as D,g as _}from"./index-C6OiLswX.js";const E={class:"container"},F={class:"setting-box"},L={__name:"Setting",setup(O){const g=d(null),v=N(),y=d([]),k=d([5,6,7,8]),z=d(["N","E","O","M","S"]),w=d([1,1.5,2]),S=d([384e3]),l=V({port:"",baudrate:384e3,bytesize:8,parity:"N",stopbits:1,timeout:1,xonxoff:!1,rtscts:!1,dsrdtr:!1}),$=V({port:[{required:!0,message:"端口不能为空",trigger:"blur"}]});M(()=>{C().then(t=>{v.setItem(t.data),l.port=t.data.port,l.baudrate=t.data.baudrate,l.bytesize=t.data.bytesize,l.parity=t.data.parity,l.timeout=t.data.timeout,l.xonxoff=t.data.xonxoff,l.rtscts=t.data.rtscts,l.dsrdtr=t.data.dsrdtr}).catch(t=>{c("error",t)}),P().then(t=>{y.value=t.data}).catch(t=>{c("error",t)})});const h=t=>{t.validate(a=>{if(!a)return!1;j(l).then(u=>{v.setItem(u.data),c("success","设置更新成功")}).catch(u=>{c("error","设置更新失败:"+u)})})};return(t,a)=>{const u=i("el-option"),m=i("el-select"),n=i("el-form-item"),x=i("el-input-number"),B=i("el-button"),U=i("el-form");return r(),p("div",E,[R("div",F,[o(U,{model:l,"label-width":"100",ref_key:"formRef",ref:g,rules:$,style:{width:"100%"}},{default:s(()=>[o(n,{label:t.$t("message.port"),prop:"port"},{default:s(()=>[o(m,{modelValue:l.port,"onUpdate:modelValue":a[0]||(a[0]=e=>l.port=e),placeholder:""},{default:s(()=>[(r(!0),p(b,null,f(y.value,e=>(r(),_(u,{label:e.Desc,value:e.Port,key:e.Port},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:t.$t("message.btl"),prop:"baudrate"},{default:s(()=>[o(m,{modelValue:l.baudrate,"onUpdate:modelValue":a[1]||(a[1]=e=>l.baudrate=e),placeholder:""},{default:s(()=>[(r(!0),p(b,null,f(S.value,e=>(r(),_(u,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:t.$t("message.sjw"),prop:"bytesize"},{default:s(()=>[o(m,{modelValue:l.bytesize,"onUpdate:modelValue":a[2]||(a[2]=e=>l.bytesize=e),placeholder:""},{default:s(()=>[(r(!0),p(b,null,f(k.value,e=>(r(),_(u,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:t.$t("message.jyw"),prop:"parity"},{default:s(()=>[o(m,{modelValue:l.parity,"onUpdate:modelValue":a[3]||(a[3]=e=>l.parity=e),placeholder:""},{default:s(()=>[(r(!0),p(b,null,f(z.value,e=>(r(),_(u,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:t.$t("message.tzw"),prop:"stopbits"},{default:s(()=>[o(m,{modelValue:l.stopbits,"onUpdate:modelValue":a[4]||(a[4]=e=>l.stopbits=e),placeholder:""},{default:s(()=>[(r(!0),p(b,null,f(w.value,e=>(r(),_(u,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:t.$t("message.csz"),prop:"timeout"},{default:s(()=>[o(x,{modelValue:l.timeout,"onUpdate:modelValue":a[5]||(a[5]=e=>l.timeout=e),precision:2,step:.1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),o(n,null,{default:s(()=>[o(B,{type:"primary",round:"",style:{width:"100%"},size:"large",onClick:a[6]||(a[6]=e=>h(g.value))},{default:s(()=>[q(D(t.$t("message.save_setting")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},H=I(L,[["__scopeId","data-v-5612e47d"]]);export{H as default};
