import{_ as H,r,o as R,c as $,a as y,b as n,e,w as o,u as C,F as q,f as i,g as V,s as A,h as u,t as P,k as G}from"./index-VfqKZcDz.js";import{a as E,s as v}from"./request-QqSoPAZ6.js";function z(g,s){return E({method:"get",url:`/money/pages?skip=${g}&limit=${s}`})}function J(g){return E({method:"post",url:"/money/search",data:g})}const K={class:"container"},L={class:"header"},O={class:"header-right"},Q={class:"search-container"},W={class:"function-area"},X={class:"content"},Y=["src"],Z={style:{"margin-top":"20px",display:"flex","justify-content":"center","align-items":"center",width:"100%"}},ee={key:0},te={style:{"margin-bottom":"20px"}},ae={key:1,style:{"margin-top":"20px",display:"flex","justify-content":"center","align-items":"center",width:"100%"}},le={__name:"Money",setup(g){const s=r(""),_=r([]),k=r(1),h=r(20),p=r(0),b=r([]),w=r(!1),x=r([]),m=r(!1);R(()=>{z(0,h.value).then(l=>{b.value=l.data.data,p.value=l.data.total}).catch(l=>{v("error","获取列表失败:"+l)})});const T=$(()=>window.innerHeight-110),D=l=>{const t=(l-1)*h.value;z(t,h.value).then(c=>{b.value=c.data.data,p.value=c.data.total}).catch(c=>{v("error","获取列表失败:"+c)})},M=l=>{k.value=l,D(l)},B=()=>{if(s.value.trim().length===0)v("warning","Please enter some words");else{w.value=!0,m.value=!0,console.log(s.value),console.log(_.value);let l={q:s.value.trim(),date_range:_.value};J(l).then(t=>{x.value=t.data.data,m.value=!1}).catch(t=>{m.value=!1,v("error","Searching failed:"+t)})}};return(l,t)=>{const c=i("el-date-picker"),f=i("el-button"),F=i("el-input"),I=i("el-text"),a=i("el-table-column"),S=i("el-table"),N=i("el-pagination"),U=i("el-tag"),j=i("el-dialog");return V(),y(q,null,[n("div",K,[n("div",L,[t[4]||(t[4]=n("div",{class:"header-left"},[n("h3",null,"历史记录")],-1)),n("div",O,[n("div",Q,[e(F,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=d=>s.value=d),placeholder:"Please Input",class:"input-with-select",size:"large"},{prepend:o(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=d=>_.value=d),type:"daterange","range-separator":"To",size:"small","start-placeholder":"Start","end-placeholder":"End",style:{width:"190px",margin:"0"}},null,8,["modelValue"])]),append:o(()=>[e(f,{icon:C(A),onClick:B},null,8,["icon"])]),_:1},8,["modelValue"])]),n("div",W,[n("div",null,[e(I,{type:"primary",truncated:"",title:p.value},{default:o(()=>[u("记录总数: "+P(p.value),1)]),_:1},8,["title"])]),e(f,{round:"",icon:C(G),type:"danger"},{default:o(()=>t[3]||(t[3]=[u("删除所有")])),_:1},8,["icon"])])])]),n("div",X,[e(S,{data:b.value,border:"",style:{width:"100%"},height:T.value},{default:o(()=>[e(a,{prop:"calc_time",label:"日期时间",width:"180",fixed:"left",align:"center"}),e(a,{prop:"tf_flag",label:"真伪标志",width:"90",fixed:"left",align:"center"}),e(a,{prop:"valuta",label:"币值",width:"120",fixed:"left",align:"center"}),e(a,{prop:"fsn_count",label:"纸币计数",width:"90",align:"center"}),e(a,{prop:"char_num",label:"冠字号码字符数",width:"130",align:"center"}),e(a,{prop:"sno",label:"冠字号码",width:"120",align:"center"}),e(a,{prop:"machine_sno",label:"机具编号",width:"120",align:"center"}),e(a,{prop:"reserve1",label:"保留字",width:"70",align:"center"}),e(a,{prop:"date",label:"读取日期",width:"120",align:"center"}),e(a,{prop:"time",label:"读取时间",width:"100",align:"center"}),e(a,{prop:"create_at",label:"数据入库时间",width:"250",align:"center"}),e(a,{fixed:"right",prop:"image_data",label:"冠字号码图像",width:"160",align:"center"},{default:o(d=>[n("img",{src:"data:image/bmp;base64,"+d.row.image_data,alt:"冠字号码图像"},null,8,Y)]),_:1})]),_:1},8,["data","height"])]),n("div",Z,[e(N,{background:"",layout:"prev, pager, next",total:p.value,"prev-text":"上一页","next-text":"下一页","current-page":k.value,"page-size":h.value,onCurrentChange:M},null,8,["total","current-page","page-size"])])]),e(j,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=d=>w.value=d),title:"Search Result",width:"90%"},{default:o(()=>[m.value?(V(),y("div",ae," Searching...... ")):(V(),y("div",ee,[n("div",te,[e(f,{plain:""},{default:o(()=>t[5]||(t[5]=[u("Export To Excel")])),_:1}),e(f,{plain:""},{default:o(()=>t[6]||(t[6]=[u("Export To PDF")])),_:1}),e(U,{type:"success",style:{"margin-left":"10px"},size:"large"},{default:o(()=>[u(P(x.value.length)+" searched items",1)]),_:1})]),e(S,{data:x.value,border:"",style:{width:"100%"},height:500},{default:o(()=>[e(a,{prop:"calc_time",label:"日期时间",width:"180",fixed:"left",align:"center"}),e(a,{prop:"tf_flag",label:"真伪标志",width:"90",fixed:"left",align:"center"}),e(a,{prop:"valuta",label:"币值",width:"120",fixed:"left",align:"center"}),e(a,{prop:"fsn_count",label:"纸币计数",width:"90",align:"center"}),e(a,{prop:"char_num",label:"冠字号码字符数",width:"130",align:"center"}),e(a,{prop:"sno",label:"冠字号码",align:"center"}),e(a,{prop:"machine_sno",label:"机具编号",width:"120",align:"center"}),e(a,{prop:"reserve1",label:"保留字",width:"70",align:"center"})]),_:1},8,["data"])]))]),_:1},8,["modelValue"])],64)}}},re=H(le,[["__scopeId","data-v-2bfb3872"]]);export{re as default};
