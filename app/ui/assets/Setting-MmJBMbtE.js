import{u as C,g as P,a as I,b as M}from"./settings-HglyURAT.js";import{s as c}from"./request-C_38H3Sb.js";import{_ as R,r as d,y as g,o as E,a as p,b as F,e as o,w as r,h as i,i as u,F as f,z as b,j,g as _}from"./index-BzML5hP_.js";const q={class:"container"},D={class:"setting-box"},L={__name:"Setting",setup(O){const y=d(null),v=C(),V=d([]),x=d([5,6,7,8]),k=d(["N","E","O","M","S"]),z=d([1,1.5,2]),S=d([384e3]),t=g({port:"",baudrate:384e3,bytesize:8,parity:"N",stopbits:1,timeout:1,xonxoff:!1,rtscts:!1,dsrdtr:!1}),w=g({port:[{required:!0,message:"端口不能为空",trigger:"blur"}]});E(()=>{P().then(l=>{v.setItem(l.data),t.port=l.data.port,t.baudrate=l.data.baudrate,t.bytesize=l.data.bytesize,t.parity=l.data.parity,t.timeout=l.data.timeout,t.xonxoff=l.data.xonxoff,t.rtscts=l.data.rtscts,t.dsrdtr=l.data.dsrdtr}).catch(l=>{c("error",l)}),I().then(l=>{V.value=l.data}).catch(l=>{c("error",l)})});const B=l=>{l.validate(a=>{if(!a)return!1;M(t).then(s=>{v.setItem(s.data),c("success","设置更新成功")}).catch(s=>{c("error","设置更新失败:"+s)})})};return(l,a)=>{const s=i("el-option"),m=i("el-select"),n=i("el-form-item"),U=i("el-input-number"),N=i("el-button"),h=i("el-form");return u(),p("div",q,[F("div",D,[o(h,{model:t,"label-width":"100",ref_key:"formRef",ref:y,rules:w,style:{width:"100%"}},{default:r(()=>[o(n,{label:"端口号",prop:"port"},{default:r(()=>[o(m,{modelValue:t.port,"onUpdate:modelValue":a[0]||(a[0]=e=>t.port=e),placeholder:"请选择端口"},{default:r(()=>[(u(!0),p(f,null,b(V.value,e=>(u(),_(s,{label:e.Desc,value:e.Port,key:e.Port},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"波特率",prop:"baudrate"},{default:r(()=>[o(m,{modelValue:t.baudrate,"onUpdate:modelValue":a[1]||(a[1]=e=>t.baudrate=e),placeholder:"请选择波特率"},{default:r(()=>[(u(!0),p(f,null,b(S.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"数据位",prop:"bytesize"},{default:r(()=>[o(m,{modelValue:t.bytesize,"onUpdate:modelValue":a[2]||(a[2]=e=>t.bytesize=e),placeholder:"请选择数据位"},{default:r(()=>[(u(!0),p(f,null,b(x.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"校验位",prop:"parity"},{default:r(()=>[o(m,{modelValue:t.parity,"onUpdate:modelValue":a[3]||(a[3]=e=>t.parity=e),placeholder:"请选择校验位"},{default:r(()=>[(u(!0),p(f,null,b(k.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"停止位",prop:"stopbits"},{default:r(()=>[o(m,{modelValue:t.stopbits,"onUpdate:modelValue":a[4]||(a[4]=e=>t.stopbits=e),placeholder:"请选择停止位"},{default:r(()=>[(u(!0),p(f,null,b(z.value,e=>(u(),_(s,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"超时值",prop:"timeout"},{default:r(()=>[o(U,{modelValue:t.timeout,"onUpdate:modelValue":a[5]||(a[5]=e=>t.timeout=e),precision:2,step:.1,max:10},null,8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(N,{type:"primary",round:"",style:{width:"100%"},size:"large",onClick:a[6]||(a[6]=e=>B(y.value))},{default:r(()=>a[7]||(a[7]=[j("保存设置 ")])),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},G=R(L,[["__scopeId","data-v-2ffca76c"]]);export{G as default};
